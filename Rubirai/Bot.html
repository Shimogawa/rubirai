<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Rubirai::Bot
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Rubirai::Bot";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (B)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Rubirai.html" title="Rubirai (module)">Rubirai</a></span></span>
     &raquo; 
    <span class="title">Bot</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Rubirai::Bot
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'>Object</span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'>Object</span></li>
          
            <li class="next">Rubirai::Bot</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/rubirai.rb<span class="defines">,<br />
  lib/rubirai/auth.rb,<br /> lib/rubirai/listing.rb,<br /> lib/rubirai/message.rb,<br /> lib/rubirai/session.rb,<br /> lib/rubirai/listener.rb,<br /> lib/rubirai/multipart.rb,<br /> lib/rubirai/event_recv.rb,<br /> lib/rubirai/event_resp.rb,<br /> lib/rubirai/management.rb,<br /> lib/rubirai/plugin_info.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Bot represents a QQ bot at mirai side. All functions are API calls to the http plugin.</p>


  </div>
</div>
<div class="tags">
  

</div>



  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#base_uri-instance_method" title="#base_uri (instance method)">#<strong>base_uri</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The base uri of mirai-api-http which the bot will send messages to.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#qq-instance_method" title="#qq (instance method)">#<strong>qq</strong>  &#x21d2; String, Integer </a>
    

    
      (also: #id)
    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The qq of the bot.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#session-instance_method" title="#session (instance method)">#<strong>session</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The session key.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#about-instance_method" title="#about (instance method)">#<strong>about</strong>  &#x21d2; Hash{String =&gt; Object} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get Mirai API plugin information.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_listener-instance_method" title="#add_listener (instance method)">#<strong>add_listener</strong>(&amp;listener_block)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Add a listener.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#auth-instance_method" title="#auth (instance method)">#<strong>auth</strong>(auth_key)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Start authentication.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear_listener-instance_method" title="#clear_listener (instance method)">#<strong>clear_listener</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Clear all listeners.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#count_cached_message-instance_method" title="#count_cached_message (instance method)">#<strong>count_cached_message</strong>  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get the number of cached messages in mirai-http-api.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fetch_latest_message-instance_method" title="#fetch_latest_message (instance method)">#<strong>fetch_latest_message</strong>(count = 10)  &#x21d2; Array&lt;Event&gt; </a>
    

    
      (also: #fetch_latest_messages, #fetch_latest_event, #fetch_latest_events)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Fetch <code>count</code> number of latest events.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fetch_message-instance_method" title="#fetch_message (instance method)">#<strong>fetch_message</strong>(count = 10)  &#x21d2; Array&lt;Event&gt; </a>
    

    
      (also: #fetch_messages, #fetch_event, #fetch_events)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Fetch <code>count</code> number of oldest events.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#friend_list-instance_method" title="#friend_list (instance method)">#<strong>friend_list</strong>  &#x21d2; Array&lt;User&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get friend list of the bot.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_group_config-instance_method" title="#get_group_config (instance method)">#<strong>get_group_config</strong>(group_id)  &#x21d2; GroupConfig </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get group config.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_group_file_info-instance_method" title="#get_group_file_info (instance method)">#<strong>get_group_file_info</strong>(group_id, file_or_id)  &#x21d2; GroupFile </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get the info about a group file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_group_file_list-instance_method" title="#get_group_file_list (instance method)">#<strong>get_group_file_list</strong>(group_id, dir = nil)  &#x21d2; Array&lt;GroupFileSimple&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get the group files as a list.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_member_info-instance_method" title="#get_member_info (instance method)">#<strong>get_member_info</strong>(group_id, member_id)  &#x21d2; MemberInfo </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get member info.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_session_cfg-instance_method" title="#get_session_cfg (instance method)">#<strong>get_session_cfg</strong>  &#x21d2; Hash{String =&gt; Object} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get the config related to this session.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#group_file_delete-instance_method" title="#group_file_delete (instance method)">#<strong>group_file_delete</strong>(group_id, file_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#group_file_mv-instance_method" title="#group_file_mv (instance method)">#<strong>group_file_mv</strong>(group_id, file_id, path)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#group_list-instance_method" title="#group_list (instance method)">#<strong>group_list</strong>  &#x21d2; Array&lt;Group&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get group list of the bot.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#group_mkdir-instance_method" title="#group_mkdir (instance method)">#<strong>group_mkdir</strong>(group_id, dir)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#group_set_essence-instance_method" title="#group_set_essence (instance method)">#<strong>group_set_essence</strong>(msg_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(host, port = nil)  &#x21d2; Bot </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Initializes the bot.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#kick-instance_method" title="#kick (instance method)">#<strong>kick</strong>(group_id, member_id, msg = nil)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Kick a member from a group.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#login-instance_method" title="#login (instance method)">#<strong>login</strong>(qq, auth_key)  &#x21d2; void </a>
    

    
      (also: #connect)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Log you in.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#logout-instance_method" title="#logout (instance method)">#<strong>logout</strong>  &#x21d2; void </a>
    

    
      (also: #disconnect)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Log you out.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#member_list-instance_method" title="#member_list (instance method)">#<strong>member_list</strong>(group_id)  &#x21d2; Array&lt;GroupUser&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get member list of a group.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#message_from_id-instance_method" title="#message_from_id (instance method)">#<strong>message_from_id</strong>(msg_id)  &#x21d2; Event </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get a message event from message id.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mute-instance_method" title="#mute (instance method)">#<strong>mute</strong>(group_id, member_id, time = 0)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Mute a group member.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mute_all-instance_method" title="#mute_all (instance method)">#<strong>mute_all</strong>(group_id)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Mute all in a group.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#peek_latest_message-instance_method" title="#peek_latest_message (instance method)">#<strong>peek_latest_message</strong>(count = 10)  &#x21d2; Array&lt;Event&gt; </a>
    

    
      (also: #peek_latest_messages, #peek_latest_event, #peek_latest_events)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Peek <code>count</code> number of latest events.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#peek_message-instance_method" title="#peek_message (instance method)">#<strong>peek_message</strong>(count = 10)  &#x21d2; Array&lt;Event&gt; </a>
    

    
      (also: #peek_messages, #peek_event, #peek_events)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Peek <code>count</code> number of oldest events.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#quit-instance_method" title="#quit (instance method)">#<strong>quit</strong>(group_id)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Quit a group.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#recall-instance_method" title="#recall (instance method)">#<strong>recall</strong>(msg_id)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Recall a message.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#release-instance_method" title="#release (instance method)">#<strong>release</strong>(qq = nil, session = nil)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Release a session.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rename_group_file-instance_method" title="#rename_group_file (instance method)">#<strong>rename_group_file</strong>(group_id, file_id, new_name)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#respond_to_group_invite-instance_method" title="#respond_to_group_invite (instance method)">#<strong>respond_to_group_invite</strong>(event_id, from_id, group_id, operation, message = &#39;&#39;)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Respond to group invitations (raw).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#respond_to_member_join-instance_method" title="#respond_to_member_join (instance method)">#<strong>respond_to_member_join</strong>(event_id, from_id, group_id, operation, message = &#39;&#39;)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Respond to join group request (raw).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#respond_to_new_friend_request-instance_method" title="#respond_to_new_friend_request (instance method)">#<strong>respond_to_new_friend_request</strong>(event_id, from_id, operation, group_id = 0, message = &#39;&#39;)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Respond to new friend request (raw).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_friend_msg-instance_method" title="#send_friend_msg (instance method)">#<strong>send_friend_msg</strong>(target_qq, *msgs)  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Send friend message.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_group_msg-instance_method" title="#send_group_msg (instance method)">#<strong>send_group_msg</strong>(target_group_id, *msgs)  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Send group message.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_image_msg-instance_method" title="#send_image_msg (instance method)">#<strong>send_image_msg</strong>(urls, **kwargs)  &#x21d2; Array&lt;String&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Send image messages.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_msg-instance_method" title="#send_msg (instance method)">#<strong>send_msg</strong>(type, target_id, *msgs)  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Send friend or group message.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_nudge-instance_method" title="#send_nudge (instance method)">#<strong>send_nudge</strong>(target_id, subject_id, kind)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Send nudge.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_temp_msg-instance_method" title="#send_temp_msg (instance method)">#<strong>send_temp_msg</strong>(target_qq, group_id, *msgs)  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Send temp message.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_group_config-instance_method" title="#set_group_config (instance method)">#<strong>set_group_config</strong>(group_id, config)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Set group config.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_member_info-instance_method" title="#set_member_info (instance method)">#<strong>set_member_info</strong>(group_id, member_id, info)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Set member info.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_session_cfg-instance_method" title="#set_session_cfg (instance method)">#<strong>set_session_cfg</strong>(cache_size: nil, enable_websocket: nil)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Set the config related to this session.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start_listen-instance_method" title="#start_listen (instance method)">#<strong>start_listen</strong>(interval, is_blocking: false, ignore_error: false)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Start to listen for events.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stop_listen-instance_method" title="#stop_listen (instance method)">#<strong>stop_listen</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Stop listening to events.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unmute-instance_method" title="#unmute (instance method)">#<strong>unmute</strong>(group_id, member_id)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Unmute a group member.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unmute_all-instance_method" title="#unmute_all (instance method)">#<strong>unmute_all</strong>(group_id)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Unmute all in a group.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#upload_file_and_send-instance_method" title="#upload_file_and_send (instance method)">#<strong>upload_file_and_send</strong>(path_or_io, target, group_path)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Uploads a file to a group (currently only groups supported).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#upload_image-instance_method" title="#upload_image (instance method)">#<strong>upload_image</strong>(path_or_io, type = :friend)  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Uploads an image to QQ server.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#upload_voice-instance_method" title="#upload_voice (instance method)">#<strong>upload_voice</strong>(path_or_io)  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Uploads a voice file to QQ server Only group uploads available currently.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#verify-instance_method" title="#verify (instance method)">#<strong>verify</strong>(qq, session = nil)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Verify and start a session.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(host, port = nil)  &#x21d2; <tt><span class='object_link'><a href="" title="Rubirai::Bot (class)">Bot</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Initializes the bot</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>host</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the host (IP or domain)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>port</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>, <tt>Integer</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the port number (default is 80 for http)</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai.rb', line 35</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_host'>host</span><span class='comma'>,</span> <span class='id identifier rubyid_port'>port</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@base_uri</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_host'>host</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port'>port</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_port'>port</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@listener_funcs</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="base_uri-instance_method">
  
    #<strong>base_uri</strong>  &#x21d2; <tt><span class='object_link'>String</span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the base uri of mirai-api-http which the bot will send messages to.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the base uri of mirai-api-http which the bot will send messages to</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai.rb', line 26</span>

<span class='kw'>class</span> <span class='const'><span class='object_link'><a href="" title="Rubirai::Bot (class)">Bot</a></span></span>
  <span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:base_uri</span><span class='comma'>,</span> <span class='symbol'>:session</span><span class='comma'>,</span> <span class='symbol'>:qq</span>

  <span class='kw'>alias</span> <span class='id identifier rubyid_id'>id</span> <span class='id identifier rubyid_qq'>qq</span>

  <span class='comment'># Initializes the bot
</span>  <span class='comment'>#
</span>  <span class='comment'># @param host [String] the host (IP or domain)
</span>  <span class='comment'># @param port [String, Integer, nil] the port number (default is 80 for http)
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_host'>host</span><span class='comma'>,</span> <span class='id identifier rubyid_port'>port</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='ivar'>@base_uri</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_host'>host</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port'>port</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_port'>port</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@listener_funcs</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='comment'># @private
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_gen_uri'>gen_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
    <span class='const'>URI</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_base_uri'>base_uri</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># @private
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ensure_type_in'>ensure_type_in</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_types'>types</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_types'>types</span> <span class='op'>=</span> <span class='id identifier rubyid_types'>types</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_must_be_one_of!'>must_be_one_of!</span> <span class='id identifier rubyid_types'>types</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="RubiraiError.html" title="Rubirai::RubiraiError (class)">RubiraiError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>not valid type: should be one of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_types'>types</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_private'>private</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kwargs'>kwargs</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='qsymbols_beg'>%i[</span><span class='tstring_content'>get</span><span class='words_sep'> </span><span class='tstring_content'>post</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='const'>HTTP</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span> <span class='const'>HTTP</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span> <span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_gen_uri'>gen_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_kwargs'>kwargs</span>
    <span class='id identifier rubyid_raise'>raise</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="HttpResponseError.html" title="Rubirai::HttpResponseError (class)">HttpResponseError</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_resp'>resp</span><span class='period'>.</span><span class='id identifier rubyid_code'>code</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_resp'>resp</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span><span class='period'>.</span><span class='id identifier rubyid_success?'>success?</span>

    <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_resp'>resp</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_body'>body</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>Hash</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_body'>body</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>code</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_body'>body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>code</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='int'>0</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="MiraiError.html" title="Rubirai::MiraiError (class)">MiraiError</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="MiraiError.html#initialize-instance_method" title="Rubirai::MiraiError#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_body'>body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>code</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_body'>body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>msg</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_body'>body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>errorMessage</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_body'>body</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="qq-instance_method">
  
    #<strong>qq</strong>  &#x21d2; <tt><span class='object_link'>String</span></tt>, <tt>Integer</tt>  <span class="extras">(readonly)</span>
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='id-instance_method'>id</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the qq of the bot.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>, <tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the qq of the bot</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai.rb', line 26</span>

<span class='kw'>class</span> <span class='const'><span class='object_link'><a href="" title="Rubirai::Bot (class)">Bot</a></span></span>
  <span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:base_uri</span><span class='comma'>,</span> <span class='symbol'>:session</span><span class='comma'>,</span> <span class='symbol'>:qq</span>

  <span class='kw'>alias</span> <span class='id identifier rubyid_id'>id</span> <span class='id identifier rubyid_qq'>qq</span>

  <span class='comment'># Initializes the bot
</span>  <span class='comment'>#
</span>  <span class='comment'># @param host [String] the host (IP or domain)
</span>  <span class='comment'># @param port [String, Integer, nil] the port number (default is 80 for http)
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_host'>host</span><span class='comma'>,</span> <span class='id identifier rubyid_port'>port</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='ivar'>@base_uri</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_host'>host</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port'>port</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_port'>port</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@listener_funcs</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='comment'># @private
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_gen_uri'>gen_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
    <span class='const'>URI</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_base_uri'>base_uri</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># @private
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ensure_type_in'>ensure_type_in</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_types'>types</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_types'>types</span> <span class='op'>=</span> <span class='id identifier rubyid_types'>types</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_must_be_one_of!'>must_be_one_of!</span> <span class='id identifier rubyid_types'>types</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="RubiraiError.html" title="Rubirai::RubiraiError (class)">RubiraiError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>not valid type: should be one of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_types'>types</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_private'>private</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kwargs'>kwargs</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='qsymbols_beg'>%i[</span><span class='tstring_content'>get</span><span class='words_sep'> </span><span class='tstring_content'>post</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='const'>HTTP</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span> <span class='const'>HTTP</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span> <span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_gen_uri'>gen_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_kwargs'>kwargs</span>
    <span class='id identifier rubyid_raise'>raise</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="HttpResponseError.html" title="Rubirai::HttpResponseError (class)">HttpResponseError</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_resp'>resp</span><span class='period'>.</span><span class='id identifier rubyid_code'>code</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_resp'>resp</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span><span class='period'>.</span><span class='id identifier rubyid_success?'>success?</span>

    <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_resp'>resp</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_body'>body</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>Hash</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_body'>body</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>code</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_body'>body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>code</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='int'>0</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="MiraiError.html" title="Rubirai::MiraiError (class)">MiraiError</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="MiraiError.html#initialize-instance_method" title="Rubirai::MiraiError#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_body'>body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>code</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_body'>body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>msg</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_body'>body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>errorMessage</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_body'>body</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="session-instance_method">
  
    #<strong>session</strong>  &#x21d2; <tt><span class='object_link'>String</span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the session key.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the session key</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai.rb', line 26</span>

<span class='kw'>class</span> <span class='const'><span class='object_link'><a href="" title="Rubirai::Bot (class)">Bot</a></span></span>
  <span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:base_uri</span><span class='comma'>,</span> <span class='symbol'>:session</span><span class='comma'>,</span> <span class='symbol'>:qq</span>

  <span class='kw'>alias</span> <span class='id identifier rubyid_id'>id</span> <span class='id identifier rubyid_qq'>qq</span>

  <span class='comment'># Initializes the bot
</span>  <span class='comment'>#
</span>  <span class='comment'># @param host [String] the host (IP or domain)
</span>  <span class='comment'># @param port [String, Integer, nil] the port number (default is 80 for http)
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_host'>host</span><span class='comma'>,</span> <span class='id identifier rubyid_port'>port</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='ivar'>@base_uri</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_host'>host</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port'>port</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_port'>port</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@listener_funcs</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='comment'># @private
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_gen_uri'>gen_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
    <span class='const'>URI</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_base_uri'>base_uri</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># @private
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ensure_type_in'>ensure_type_in</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_types'>types</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_types'>types</span> <span class='op'>=</span> <span class='id identifier rubyid_types'>types</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='rbrace'>}</span>
    <span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_must_be_one_of!'>must_be_one_of!</span> <span class='id identifier rubyid_types'>types</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="RubiraiError.html" title="Rubirai::RubiraiError (class)">RubiraiError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>not valid type: should be one of </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_types'>types</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_private'>private</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kwargs'>kwargs</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='qsymbols_beg'>%i[</span><span class='tstring_content'>get</span><span class='words_sep'> </span><span class='tstring_content'>post</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='const'>HTTP</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span> <span class='const'>HTTP</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span> <span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_gen_uri'>gen_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_kwargs'>kwargs</span>
    <span class='id identifier rubyid_raise'>raise</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="HttpResponseError.html" title="Rubirai::HttpResponseError (class)">HttpResponseError</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_resp'>resp</span><span class='period'>.</span><span class='id identifier rubyid_code'>code</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_resp'>resp</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span><span class='period'>.</span><span class='id identifier rubyid_success?'>success?</span>

    <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_resp'>resp</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_body'>body</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>Hash</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_body'>body</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>code</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_body'>body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>code</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='int'>0</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="MiraiError.html" title="Rubirai::MiraiError (class)">MiraiError</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="MiraiError.html#initialize-instance_method" title="Rubirai::MiraiError#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_body'>body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>code</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_body'>body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>msg</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_body'>body</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>errorMessage</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_body'>body</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="about-instance_method">
  
    #<strong>about</strong>  &#x21d2; <tt><span class='object_link'>Hash</span>{<span class='object_link'>String</span> =&gt; <span class='object_link'>Object</span>}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get Mirai API plugin information.</p>

<p>The information is like</p>

<pre class="code ruby"><code class="ruby"><span class='lbrace'>{</span>
  <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>version</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1.0.0</span><span class='tstring_end'>&#39;</span></span>
<span class='rbrace'>}</span>
</code></pre>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>Hash</span>{<span class='object_link'>String</span> =&gt; <span class='object_link'>Object</span>}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>plugin data</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


15
16
17
18</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/plugin_info.rb', line 15</span>

<span class='kw'>def</span> <span class='id identifier rubyid_about'>about</span>
  <span class='id identifier rubyid_v'>v</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:get</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/about</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_v'>v</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_listener-instance_method">
  
    #<strong>add_listener</strong>(&amp;listener_block)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Add a listener</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


39
40
41</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/listener.rb', line 39</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_listener'>add_listener</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_listener_block'>listener_block</span><span class='rparen'>)</span>
  <span class='ivar'>@listener_funcs</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_listener_block'>listener_block</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="auth-instance_method">
  
    #<strong>auth</strong>(auth_key)  &#x21d2; <tt><span class='object_link'>String</span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Start authentication. Will store the session.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>auth_key</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the auth key defined in config file</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the session key which will also be stored in the bot</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


8
9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/auth.rb', line 8</span>

<span class='kw'>def</span> <span class='id identifier rubyid_auth'>auth</span><span class='lparen'>(</span><span class='id identifier rubyid_auth_key'>auth_key</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_v'>v</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/auth</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>authKey</span><span class='label_end'>&quot;:</span> <span class='id identifier rubyid_auth_key'>auth_key</span> <span class='rbrace'>}</span>
  <span class='ivar'>@session</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>session</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="clear_listener-instance_method">
  
    #<strong>clear_listener</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Clear all listeners</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


46
47
48</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/listener.rb', line 46</span>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_listener'>clear_listener</span>
  <span class='ivar'>@listener_funcs</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="count_cached_message-instance_method">
  
    #<strong>count_cached_message</strong>  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get the number of cached messages in mirai-http-api</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the number of cached messages</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


64
65
66
67
68
69</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/event_recv.rb', line 64</span>

<span class='kw'>def</span> <span class='id identifier rubyid_count_cached_message'>count_cached_message</span>
  <span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:get</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/countMessage</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>params:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span>
  <span class='rbrace'>}</span>
  <span class='id identifier rubyid_resp'>resp</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fetch_latest_message-instance_method">
  
    #<strong>fetch_latest_message</strong>(count = 10)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Event.html" title="Rubirai::Event (class)">Event</a></span>&gt;</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='fetch_latest_messages-instance_method'>fetch_latest_messages</span>, <span id='fetch_latest_event-instance_method'>fetch_latest_event</span>, <span id='fetch_latest_events-instance_method'>fetch_latest_events</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Fetch <code>count</code> number of latest events.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>count</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>10</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the number of events to fetch</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Event.html" title="Rubirai::Event (class)">Event</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the event objects</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


21
22
23</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/event_recv.rb', line 21</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fetch_latest_message'>fetch_latest_message</span><span class='lparen'>(</span><span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='int'>10</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_get_events'>get_events</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/fetchLatestMessage</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_count'>count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fetch_message-instance_method">
  
    #<strong>fetch_message</strong>(count = 10)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Event.html" title="Rubirai::Event (class)">Event</a></span>&gt;</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='fetch_messages-instance_method'>fetch_messages</span>, <span id='fetch_event-instance_method'>fetch_event</span>, <span id='fetch_events-instance_method'>fetch_events</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Fetch <code>count</code> number of oldest events.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>count</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>10</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the number of events to fetch</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Event.html" title="Rubirai::Event (class)">Event</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the event objects.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


10
11
12</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/event_recv.rb', line 10</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fetch_message'>fetch_message</span><span class='lparen'>(</span><span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='int'>10</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_get_events'>get_events</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/fetchMessage</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_count'>count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="friend_list-instance_method">
  
    #<strong>friend_list</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="User.html" title="Rubirai::User (class)">User</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get friend list of the bot</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="User.html" title="Rubirai::User (class)">User</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>list of friends</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


10
11
12
13
14
15</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/listing.rb', line 10</span>

<span class='kw'>def</span> <span class='id identifier rubyid_friend_list'>friend_list</span>
  <span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:get</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/friendList</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>params:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span>
  <span class='rbrace'>}</span>
  <span class='id identifier rubyid_resp'>resp</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_friend'>friend</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="User.html" title="Rubirai::User (class)">User</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="User.html#initialize-instance_method" title="Rubirai::User#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_friend'>friend</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_group_config-instance_method">
  
    #<strong>get_group_config</strong>(group_id)  &#x21d2; <tt><span class='object_link'><a href="GroupConfig.html" title="Rubirai::GroupConfig (class)">GroupConfig</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get group config</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>group_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>group id</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="GroupConfig.html" title="Rubirai::GroupConfig (class)">GroupConfig</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the config</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


93
94
95
96
97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/management.rb', line 93</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_group_config'>get_group_config</span><span class='lparen'>(</span><span class='id identifier rubyid_group_id'>group_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:get</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/groupConfig</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>params:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='id identifier rubyid_group_id'>group_id</span>
  <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="GroupConfig.html" title="Rubirai::GroupConfig (class)">GroupConfig</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="GroupConfig.html#initialize-instance_method" title="Rubirai::GroupConfig#initialize (method)">new</a></span></span> <span class='id identifier rubyid_resp'>resp</span><span class='comma'>,</span> <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_group_file_info-instance_method">
  
    #<strong>get_group_file_info</strong>(group_id, file_or_id)  &#x21d2; <tt><span class='object_link'><a href="GroupFile.html" title="Rubirai::GroupFile (class)">GroupFile</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get the info about a group file</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>group_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the group id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>file_or_id</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="GroupFileSimple.html" title="Rubirai::GroupFileSimple (class)">GroupFileSimple</a></span></tt>, <tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the file id, e.g. <code>/xxx-xxx-xxx-xxx</code></p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="GroupFile.html" title="Rubirai::GroupFile (class)">GroupFile</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the info about the file</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="RubiraiError.html" title="Rubirai::RubiraiError (class)">RubiraiError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


175
176
177
178
179
180
181
182
183
184
185
186</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/management.rb', line 175</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_group_file_info'>get_group_file_info</span><span class='lparen'>(</span><span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_file_or_id'>file_or_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_file_or_id'>file_or_id</span><span class='period'>.</span><span class='id identifier rubyid_must_be!'>must_be!</span> <span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="GroupFileSimple.html" title="Rubirai::GroupFileSimple (class)">GroupFileSimple</a></span></span><span class='comma'>,</span> <span class='const'>String</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="RubiraiError.html" title="Rubirai::RubiraiError (class)">RubiraiError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>must be GroupFileSimple or String</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="RubiraiError.html" title="Rubirai::RubiraiError (class)">RubiraiError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file_or_id'>file_or_id</span><span class='embexpr_end'>}</span><span class='tstring_content'> is not a file</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_file_or_id'>file_or_id</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="GroupFileSimple.html" title="Rubirai::GroupFileSimple (class)">GroupFileSimple</a></span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_file_or_id'>file_or_id</span><span class='period'>.</span><span class='id identifier rubyid_is_file?'>is_file?</span>
  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_file_or_id'>file_or_id</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>String</span> <span class='op'>?</span> <span class='id identifier rubyid_file_or_id'>file_or_id</span> <span class='op'>:</span> <span class='id identifier rubyid_file_or_id'>file_or_id</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>

  <span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:get</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/groupFileInfo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>params:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span>
    <span class='label'>id:</span> <span class='id identifier rubyid_id'>id</span>
  <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="GroupFile.html" title="Rubirai::GroupFile (class)">GroupFile</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="GroupFile.html#initialize-instance_method" title="Rubirai::GroupFile#initialize (method)">new</a></span></span> <span class='id identifier rubyid_resp'>resp</span><span class='comma'>,</span> <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_group_file_list-instance_method">
  
    #<strong>get_group_file_list</strong>(group_id, dir = nil)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="GroupFileSimple.html" title="Rubirai::GroupFileSimple (class)">GroupFileSimple</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get the group files as a list</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>group_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the group id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>dir</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the directory to get. If <code>nil</code>, then the root directory is asserted.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="GroupFileSimple.html" title="Rubirai::GroupFileSimple (class)">GroupFileSimple</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the list of files</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


160
161
162
163
164
165
166
167
168</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/management.rb', line 160</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_group_file_list'>get_group_file_list</span><span class='lparen'>(</span><span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_dir'>dir</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:get</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/groupFileList</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>params:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span>
    <span class='label'>dir:</span> <span class='id identifier rubyid_dir'>dir</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
  <span class='id identifier rubyid_resp'>resp</span><span class='period'>.</span><span class='id identifier rubyid_must_be!'>must_be!</span> <span class='const'>Array</span> <span class='comment'># assert resp is Array
</span>  <span class='id identifier rubyid_resp'>resp</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="GroupFileSimple.html" title="Rubirai::GroupFileSimple (class)">GroupFileSimple</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="GroupFileSimple.html#initialize-instance_method" title="Rubirai::GroupFileSimple#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_member_info-instance_method">
  
    #<strong>get_member_info</strong>(group_id, member_id)  &#x21d2; <tt><span class='object_link'><a href="MemberInfo.html" title="Rubirai::MemberInfo (class)">MemberInfo</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get member info</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>group_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>group id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>member_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the member&#39;s qq id</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="MemberInfo.html" title="Rubirai::MemberInfo (class)">MemberInfo</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the member&#39;s info</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


125
126
127
128
129
130
131
132</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/management.rb', line 125</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_member_info'>get_member_info</span><span class='lparen'>(</span><span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_member_id'>member_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:get</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/memberInfo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>params:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span>
    <span class='label'>memberId:</span> <span class='id identifier rubyid_member_id'>member_id</span>
  <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="MemberInfo.html" title="Rubirai::MemberInfo (class)">MemberInfo</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="MemberInfo.html#initialize-instance_method" title="Rubirai::MemberInfo#initialize (method)">new</a></span></span> <span class='id identifier rubyid_resp'>resp</span><span class='comma'>,</span> <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_session_cfg-instance_method">
  
    #<strong>get_session_cfg</strong>  &#x21d2; <tt><span class='object_link'>Hash</span>{<span class='object_link'>String</span> =&gt; <span class='object_link'>Object</span>}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get the config related to this session</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>Hash</span>{<span class='object_link'>String</span> =&gt; <span class='object_link'>Object</span>}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the config</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


7
8
9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/session.rb', line 7</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_session_cfg'>get_session_cfg</span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:get</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/config</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>params:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="group_file_delete-instance_method">
  
    #<strong>group_file_delete</strong>(group_id, file_id)  &#x21d2; <tt><span class='object_link'>Object</span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


217
218
219
220
221
222
223
224</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/management.rb', line 217</span>

<span class='kw'>def</span> <span class='id identifier rubyid_group_file_delete'>group_file_delete</span><span class='lparen'>(</span><span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_file_id'>file_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/groupFileDelete</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span>
    <span class='label'>id:</span> <span class='id identifier rubyid_file_id'>file_id</span>
  <span class='rbrace'>}</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="group_file_mv-instance_method">
  
    #<strong>group_file_mv</strong>(group_id, file_id, path)  &#x21d2; <tt><span class='object_link'>Object</span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


207
208
209
210
211
212
213
214
215</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/management.rb', line 207</span>

<span class='kw'>def</span> <span class='id identifier rubyid_group_file_mv'>group_file_mv</span><span class='lparen'>(</span><span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_file_id'>file_id</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/groupFileMove</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span>
    <span class='label'>id:</span> <span class='id identifier rubyid_file_id'>file_id</span><span class='comma'>,</span>
    <span class='label'>movePath:</span> <span class='id identifier rubyid_path'>path</span>
  <span class='rbrace'>}</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="group_list-instance_method">
  
    #<strong>group_list</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Group.html" title="Rubirai::Group (class)">Group</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get group list of the bot</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Group.html" title="Rubirai::Group (class)">Group</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>list of groups</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


19
20
21
22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/listing.rb', line 19</span>

<span class='kw'>def</span> <span class='id identifier rubyid_group_list'>group_list</span>
  <span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:get</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/groupList</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>params:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span>
  <span class='rbrace'>}</span>
  <span class='id identifier rubyid_resp'>resp</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_group'>group</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="Group.html" title="Rubirai::Group (class)">Group</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Group.html#initialize-instance_method" title="Rubirai::Group#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_group'>group</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="group_mkdir-instance_method">
  
    #<strong>group_mkdir</strong>(group_id, dir)  &#x21d2; <tt><span class='object_link'>Object</span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


198
199
200
201
202
203
204
205</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/management.rb', line 198</span>

<span class='kw'>def</span> <span class='id identifier rubyid_group_mkdir'>group_mkdir</span><span class='lparen'>(</span><span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_dir'>dir</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/groupMkdir</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>group:</span> <span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span>
    <span class='label'>dir:</span> <span class='id identifier rubyid_dir'>dir</span>
  <span class='rbrace'>}</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="group_set_essence-instance_method">
  
    #<strong>group_set_essence</strong>(msg_id)  &#x21d2; <tt><span class='object_link'>Object</span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


226
227
228
229
230
231
232</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/management.rb', line 226</span>

<span class='kw'>def</span> <span class='id identifier rubyid_group_set_essence'>group_set_essence</span><span class='lparen'>(</span><span class='id identifier rubyid_msg_id'>msg_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/setEssence</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='id identifier rubyid_msg_id'>msg_id</span>
  <span class='rbrace'>}</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="kick-instance_method">
  
    #<strong>kick</strong>(group_id, member_id, msg = nil)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Kick a member from a group</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>group_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>group id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>member_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>member id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>msg</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the message for the kicked</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


42
43
44
45
46
47
48
49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/management.rb', line 42</span>

<span class='kw'>def</span> <span class='id identifier rubyid_kick'>kick</span><span class='lparen'>(</span><span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_member_id'>member_id</span><span class='comma'>,</span> <span class='id identifier rubyid_msg'>msg</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_json'>json</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span>
    <span class='label'>memberId:</span> <span class='id identifier rubyid_member_id'>member_id</span>
  <span class='rbrace'>}</span>
  <span class='id identifier rubyid_json'>json</span><span class='lbracket'>[</span><span class='symbol'>:msg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_msg'>msg</span> <span class='kw'>if</span> <span class='id identifier rubyid_msg'>msg</span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/kick</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='id identifier rubyid_json'>json</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="login-instance_method">
  
    #<strong>login</strong>(qq, auth_key)  &#x21d2; <tt>void</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='connect-instance_method'>connect</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Log you in.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>qq</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>, <tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>qq id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>auth_key</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the auth key set in the settings file for mirai-api-http.</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#auth-instance_method" title="Rubirai::Bot#auth (method)">#auth</a></span></li>
    
      <li><span class='object_link'><a href="#verify-instance_method" title="Rubirai::Bot#verify (method)">#verify</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51
52</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/auth.rb', line 49</span>

<span class='kw'>def</span> <span class='id identifier rubyid_login'>login</span><span class='lparen'>(</span><span class='id identifier rubyid_qq'>qq</span><span class='comma'>,</span> <span class='id identifier rubyid_auth_key'>auth_key</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_auth'>auth</span> <span class='id identifier rubyid_auth_key'>auth_key</span>
  <span class='id identifier rubyid_verify'>verify</span> <span class='id identifier rubyid_qq'>qq</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="logout-instance_method">
  
    #<strong>logout</strong>  &#x21d2; <tt>void</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='disconnect-instance_method'>disconnect</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Log you out.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#release-instance_method" title="Rubirai::Bot#release (method)">#release</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


60
61
62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/auth.rb', line 60</span>

<span class='kw'>def</span> <span class='id identifier rubyid_logout'>logout</span>
  <span class='id identifier rubyid_release'>release</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="member_list-instance_method">
  
    #<strong>member_list</strong>(group_id)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="GroupUser.html" title="Rubirai::GroupUser (class)">GroupUser</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get member list of a group</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>group_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>, <tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>group id</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="GroupUser.html" title="Rubirai::GroupUser (class)">GroupUser</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>list of members</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


29
30
31
32
33
34
35</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/listing.rb', line 29</span>

<span class='kw'>def</span> <span class='id identifier rubyid_member_list'>member_list</span><span class='lparen'>(</span><span class='id identifier rubyid_group_id'>group_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:get</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/memberList</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>params:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='id identifier rubyid_group_id'>group_id</span>
  <span class='rbrace'>}</span>
  <span class='id identifier rubyid_resp'>resp</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_member'>member</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="GroupUser.html" title="Rubirai::GroupUser (class)">GroupUser</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="GroupUser.html#initialize-instance_method" title="Rubirai::GroupUser#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_member'>member</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="message_from_id-instance_method">
  
    #<strong>message_from_id</strong>(msg_id)  &#x21d2; <tt><span class='object_link'><a href="Event.html" title="Rubirai::Event (class)">Event</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get a message event from message id</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>msg_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>message id</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Event.html" title="Rubirai::Event (class)">Event</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the event object</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


54
55
56
57
58
59
60</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/event_recv.rb', line 54</span>

<span class='kw'>def</span> <span class='id identifier rubyid_message_from_id'>message_from_id</span><span class='lparen'>(</span><span class='id identifier rubyid_msg_id'>msg_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:get</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/messageFromId</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>params:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>id:</span> <span class='id identifier rubyid_msg_id'>msg_id</span>
  <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="Event.html" title="Rubirai::Event (class)">Event</a></span></span><span class='period'>.</span><span class='id identifier rubyid_parse'><span class='object_link'><a href="Event.html#parse-class_method" title="Rubirai::Event.parse (method)">parse</a></span></span> <span class='id identifier rubyid_resp'>resp</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mute-instance_method">
  
    #<strong>mute</strong>(group_id, member_id, time = 0)  &#x21d2; <tt><span class='object_link'>Object</span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Mute a group member</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>group_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>group id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>member_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>member id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>time</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>0</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the mute time</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


12
13
14
15
16
17
18
19
20</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/management.rb', line 12</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mute'>mute</span><span class='lparen'>(</span><span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_member_id'>member_id</span><span class='comma'>,</span> <span class='id identifier rubyid_time'>time</span> <span class='op'>=</span> <span class='int'>0</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/mute</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span>
    <span class='label'>memberId:</span> <span class='id identifier rubyid_member_id'>member_id</span><span class='comma'>,</span>
    <span class='label'>time:</span> <span class='id identifier rubyid_time'>time</span>
  <span class='rbrace'>}</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mute_all-instance_method">
  
    #<strong>mute_all</strong>(group_id)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Mute all in a group</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>group_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>group id</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


69
70
71
72
73
74
75</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/management.rb', line 69</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mute_all'>mute_all</span><span class='lparen'>(</span><span class='id identifier rubyid_group_id'>group_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/muteAll</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='id identifier rubyid_group_id'>group_id</span>
  <span class='rbrace'>}</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="peek_latest_message-instance_method">
  
    #<strong>peek_latest_message</strong>(count = 10)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Event.html" title="Rubirai::Event (class)">Event</a></span>&gt;</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='peek_latest_messages-instance_method'>peek_latest_messages</span>, <span id='peek_latest_event-instance_method'>peek_latest_event</span>, <span id='peek_latest_events-instance_method'>peek_latest_events</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Peek <code>count</code> number of latest events. (Will not delete from cache)</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>count</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>10</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the number of events to peek</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Event.html" title="Rubirai::Event (class)">Event</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the event objects</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


43
44
45</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/event_recv.rb', line 43</span>

<span class='kw'>def</span> <span class='id identifier rubyid_peek_latest_message'>peek_latest_message</span><span class='lparen'>(</span><span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='int'>10</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_get_events'>get_events</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/peekLatestMessage</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_count'>count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="peek_message-instance_method">
  
    #<strong>peek_message</strong>(count = 10)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Event.html" title="Rubirai::Event (class)">Event</a></span>&gt;</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='peek_messages-instance_method'>peek_messages</span>, <span id='peek_event-instance_method'>peek_event</span>, <span id='peek_events-instance_method'>peek_events</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Peek <code>count</code> number of oldest events. (Will not delete from cache)</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>count</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>10</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the number of events to peek</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Event.html" title="Rubirai::Event (class)">Event</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the event objects</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/event_recv.rb', line 32</span>

<span class='kw'>def</span> <span class='id identifier rubyid_peek_message'>peek_message</span><span class='lparen'>(</span><span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='int'>10</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_get_events'>get_events</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/peekMessage</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_count'>count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="quit-instance_method">
  
    #<strong>quit</strong>(group_id)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Quit a group</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>group_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>group id</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59
60
61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/management.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_quit'>quit</span><span class='lparen'>(</span><span class='id identifier rubyid_group_id'>group_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/quit</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='id identifier rubyid_group_id'>group_id</span>
  <span class='rbrace'>}</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="recall-instance_method">
  
    #<strong>recall</strong>(msg_id)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Recall a message</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>msg_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>message id</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


64
65
66
67
68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/message.rb', line 64</span>

<span class='kw'>def</span> <span class='id identifier rubyid_recall'>recall</span><span class='lparen'>(</span><span class='id identifier rubyid_msg_id'>msg_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/recall</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='id identifier rubyid_msg_id'>msg_id</span>
  <span class='rbrace'>}</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="release-instance_method">
  
    #<strong>release</strong>(qq = nil, session = nil)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Release a session.
Only fill in the arguments when you want to control another bot on the same Mirai process.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>qq</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>, <tt>Integer</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>qq id. Set to <code>nil</code> will use the logged in bot id.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>session</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the session key. Set to <code>nil</code> will use the logged in credentials.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="RubiraiError.html" title="Rubirai::RubiraiError (class)">RubiraiError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


31
32
33
34
35
36
37
38
39
40</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/auth.rb', line 31</span>

<span class='kw'>def</span> <span class='id identifier rubyid_release'>release</span><span class='lparen'>(</span><span class='id identifier rubyid_qq'>qq</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_session'>session</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_qq'>qq</span> <span class='op'>||=</span> <span class='ivar'>@qq</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="RubiraiError.html" title="Rubirai::RubiraiError (class)">RubiraiError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>not same qq: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_qq'>qq</span><span class='embexpr_end'>}</span><span class='tstring_content'> and </span><span class='embexpr_beg'>#{</span><span class='ivar'>@qq</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_qq'>qq</span> <span class='op'>!=</span> <span class='ivar'>@qq</span>
  <span class='id identifier rubyid_check'>check</span> <span class='id identifier rubyid_qq'>qq</span><span class='comma'>,</span> <span class='id identifier rubyid_session'>session</span>

  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/release</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sessionKey</span><span class='label_end'>&quot;:</span> <span class='ivar'>@session</span> <span class='op'>||</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>qq</span><span class='label_end'>&quot;:</span> <span class='id identifier rubyid_qq'>qq</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='rbrace'>}</span>
  <span class='ivar'>@session</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@qq</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rename_group_file-instance_method">
  
    #<strong>rename_group_file</strong>(group_id, file_id, new_name)  &#x21d2; <tt><span class='object_link'>Object</span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


188
189
190
191
192
193
194
195
196</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/management.rb', line 188</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rename_group_file'>rename_group_file</span><span class='lparen'>(</span><span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_file_id'>file_id</span><span class='comma'>,</span> <span class='id identifier rubyid_new_name'>new_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/groupFileRename</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span>
    <span class='label'>id:</span> <span class='id identifier rubyid_file_id'>file_id</span><span class='comma'>,</span>
    <span class='label'>rename:</span> <span class='id identifier rubyid_new_name'>new_name</span>
  <span class='rbrace'>}</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="respond_to_group_invite-instance_method">
  
    #<strong>respond_to_group_invite</strong>(event_id, from_id, group_id, operation, message = &#39;&#39;)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Respond to group invitations (raw)</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>event_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the event id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>from_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>id of the sender</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>group_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the group id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>operation</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>see <span class='object_link'><a href="GroupInviteRequestOperation.html" title="Rubirai::GroupInviteRequestOperation (module)">GroupInviteRequestOperation</a></span></p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>message</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the message to reply</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


97
98
99
100
101
102
103
104
105
106
107</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/event_resp.rb', line 97</span>

<span class='kw'>def</span> <span class='id identifier rubyid_respond_to_group_invite'>respond_to_group_invite</span><span class='lparen'>(</span><span class='id identifier rubyid_event_id'>event_id</span><span class='comma'>,</span> <span class='id identifier rubyid_from_id'>from_id</span><span class='comma'>,</span> <span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_operation'>operation</span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/resp/botInvitedJoinGroupRequestEvent</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>eventId:</span> <span class='id identifier rubyid_event_id'>event_id</span><span class='comma'>,</span>
    <span class='label'>fromId:</span> <span class='id identifier rubyid_from_id'>from_id</span><span class='comma'>,</span>
    <span class='label'>groupId:</span> <span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span>
    <span class='label'>operate:</span> <span class='id identifier rubyid_operation'>operation</span><span class='comma'>,</span>
    <span class='label'>message:</span> <span class='id identifier rubyid_message'>message</span>
  <span class='rbrace'>}</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="respond_to_member_join-instance_method">
  
    #<strong>respond_to_member_join</strong>(event_id, from_id, group_id, operation, message = &#39;&#39;)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Respond to join group request (raw)</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>event_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the event id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>from_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>id of the requester</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>operation</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>see <span class='object_link'><a href="JoinGroupRequestOperation.html" title="Rubirai::JoinGroupRequestOperation (module)">JoinGroupRequestOperation</a></span></p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>group_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the group where the request is from. 0 if not from group.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>message</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the message to reply</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78
79
80
81
82
83
84
85
86
87</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/event_resp.rb', line 77</span>

<span class='kw'>def</span> <span class='id identifier rubyid_respond_to_member_join'>respond_to_member_join</span><span class='lparen'>(</span><span class='id identifier rubyid_event_id'>event_id</span><span class='comma'>,</span> <span class='id identifier rubyid_from_id'>from_id</span><span class='comma'>,</span> <span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_operation'>operation</span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/resp/memberJoinRequestEvent</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>eventId:</span> <span class='id identifier rubyid_event_id'>event_id</span><span class='comma'>,</span>
    <span class='label'>fromId:</span> <span class='id identifier rubyid_from_id'>from_id</span><span class='comma'>,</span>
    <span class='label'>groupId:</span> <span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span>
    <span class='label'>operate:</span> <span class='id identifier rubyid_operation'>operation</span><span class='comma'>,</span>
    <span class='label'>message:</span> <span class='id identifier rubyid_message'>message</span>
  <span class='rbrace'>}</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="respond_to_new_friend_request-instance_method">
  
    #<strong>respond_to_new_friend_request</strong>(event_id, from_id, operation, group_id = 0, message = &#39;&#39;)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Respond to new friend request (raw)</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>event_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the event id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>from_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>id of the requester</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>operation</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>see <span class='object_link'><a href="FriendRequestOperation.html" title="Rubirai::FriendRequestOperation (module)">FriendRequestOperation</a></span>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>group_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>0</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the group where the request is from. 0 if not from group.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>message</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;&#39;</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the message to reply</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59
60
61
62
63
64
65
66
67</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/event_resp.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_respond_to_new_friend_request'>respond_to_new_friend_request</span><span class='lparen'>(</span><span class='id identifier rubyid_event_id'>event_id</span><span class='comma'>,</span> <span class='id identifier rubyid_from_id'>from_id</span><span class='comma'>,</span> <span class='id identifier rubyid_operation'>operation</span><span class='comma'>,</span> <span class='id identifier rubyid_group_id'>group_id</span> <span class='op'>=</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/resp/newFriendRequestEvent</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>eventId:</span> <span class='id identifier rubyid_event_id'>event_id</span><span class='comma'>,</span>
    <span class='label'>fromId:</span> <span class='id identifier rubyid_from_id'>from_id</span><span class='comma'>,</span>
    <span class='label'>groupId:</span> <span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span>
    <span class='label'>operate:</span> <span class='id identifier rubyid_operation'>operation</span><span class='comma'>,</span>
    <span class='label'>message:</span> <span class='id identifier rubyid_message'>message</span>
  <span class='rbrace'>}</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="send_friend_msg-instance_method">
  
    #<strong>send_friend_msg</strong>(target_qq, *msgs)  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Send friend message</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>target_qq</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>target qq id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>msgs</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Message.html" title="Rubirai::Message (class)">Rubirai::Message</a></span>, <span class='object_link'>Hash</span>, <span class='object_link'>String</span>, <span class='object_link'>Object</span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>messages to form a chain, can be any type</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>message id</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


47
48
49</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/message.rb', line 47</span>

<span class='kw'>def</span> <span class='id identifier rubyid_send_friend_msg'>send_friend_msg</span><span class='lparen'>(</span><span class='id identifier rubyid_target_qq'>target_qq</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_msgs'>msgs</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_send_msg'>send_msg</span> <span class='symbol'>:friend</span><span class='comma'>,</span> <span class='id identifier rubyid_target_qq'>target_qq</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_msgs'>msgs</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="send_group_msg-instance_method">
  
    #<strong>send_group_msg</strong>(target_group_id, *msgs)  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Send group message</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>target_group_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>group id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>msgs</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Message.html" title="Rubirai::Message (class)">Rubirai::Message</a></span>, <span class='object_link'>Hash</span>, <span class='object_link'>String</span>, <span class='object_link'>Object</span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>messages to form a chain, can be any type</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>message id</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


56
57
58</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/message.rb', line 56</span>

<span class='kw'>def</span> <span class='id identifier rubyid_send_group_msg'>send_group_msg</span><span class='lparen'>(</span><span class='id identifier rubyid_target_group_id'>target_group_id</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_msgs'>msgs</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_send_msg'>send_msg</span> <span class='symbol'>:group</span><span class='comma'>,</span> <span class='id identifier rubyid_target_group_id'>target_group_id</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_msgs'>msgs</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="send_image_msg-instance_method">
  
    #<strong>send_image_msg</strong>(urls, **kwargs)  &#x21d2; <tt>Array&lt;<span class='object_link'>String</span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Send image messages</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>urls</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'>String</span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the urls of the images</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>kwargs</span>
      
      
        <span class='type'>(<tt><span class='object_link'>Hash</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>keys are one of [target, qq, group].</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'>String</span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the image ids</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78
79
80
81
82
83
84
85
86
87
88
89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/message.rb', line 77</span>

<span class='kw'>def</span> <span class='id identifier rubyid_send_image_msg'>send_image_msg</span><span class='lparen'>(</span><span class='id identifier rubyid_urls'>urls</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kwargs'>kwargs</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_urls'>urls</span><span class='period'>.</span><span class='id identifier rubyid_must_be!'>must_be!</span> <span class='const'>Array</span>
  <span class='id identifier rubyid_urls'>urls</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_url'>url</span><span class='op'>|</span>
    <span class='id identifier rubyid_url'>url</span><span class='period'>.</span><span class='id identifier rubyid_must_be!'>must_be!</span> <span class='const'>String</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_valid'>valid</span> <span class='op'>=</span> <span class='qwords_beg'>%w[</span><span class='tstring_content'>target</span><span class='words_sep'> </span><span class='tstring_content'>qq</span><span class='words_sep'> </span><span class='tstring_content'>group</span><span class='tstring_end'>]</span></span>
  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>urls:</span> <span class='id identifier rubyid_urls'>urls</span>
  <span class='rbrace'>}</span>
  <span class='id identifier rubyid_kwargs'>kwargs</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
    <span class='id identifier rubyid_res'>res</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span> <span class='kw'>if</span> <span class='id identifier rubyid_valid'>valid</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/sendImageMessage</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='id identifier rubyid_res'>res</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="send_msg-instance_method">
  
    #<strong>send_msg</strong>(type, target_id, *msgs)  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Send friend or group message</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>type</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>options: [group, friend]</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>target_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>target qq/group id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>msgs</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Message.html" title="Rubirai::Message (class)">Rubirai::Message</a></span>, <span class='object_link'>Hash</span>, <span class='object_link'>String</span>, <span class='object_link'>Object</span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>messages to form a chain, can be any type</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>message id</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


31
32
33
34
35
36
37
38
39
40</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/message.rb', line 31</span>

<span class='kw'>def</span> <span class='id identifier rubyid_send_msg'>send_msg</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_target_id'>target_id</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_msgs'>msgs</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_ensure_type_in'>ensure_type_in</span> <span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>group</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>friend</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_chain'>chain</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Rubirai.html" title="Rubirai (module)">Rubirai</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="MessageChain.html" title="Rubirai::MessageChain (class)">MessageChain</a></span></span><span class='period'>.</span><span class='id identifier rubyid_make'><span class='object_link'><a href="MessageChain.html#make-class_method" title="Rubirai::MessageChain.make (method)">make</a></span></span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_msgs'>msgs</span><span class='comma'>,</span> <span class='label'>bot:</span> <span class='kw'>self</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/send</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_snake_to_camel'>snake_to_camel</span><span class='embexpr_end'>}</span><span class='tstring_content'>Message</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='id identifier rubyid_target_id'>target_id</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span>
    <span class='label'>messageChain:</span> <span class='id identifier rubyid_chain'>chain</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
  <span class='rbrace'>}</span>
  <span class='id identifier rubyid_resp'>resp</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>messageId</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="send_nudge-instance_method">
  
    #<strong>send_nudge</strong>(target_id, subject_id, kind)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Send nudge</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>target_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>target id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>subject_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the id of the place where the nudge will be seen.
Should be a group id or a friend&#39;s id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>kind</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>, <tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>options: <code>[Group, Friend]</code></p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


100
101
102
103
104
105
106
107
108
109</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/message.rb', line 100</span>

<span class='kw'>def</span> <span class='id identifier rubyid_send_nudge'>send_nudge</span><span class='lparen'>(</span><span class='id identifier rubyid_target_id'>target_id</span><span class='comma'>,</span> <span class='id identifier rubyid_subject_id'>subject_id</span><span class='comma'>,</span> <span class='id identifier rubyid_kind'>kind</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_kind'>kind</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_must_be_one_of!'>must_be_one_of!</span> <span class='qwords_beg'>%w[</span><span class='tstring_content'>group</span><span class='words_sep'> </span><span class='tstring_content'>friend</span><span class='tstring_end'>]</span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="RubiraiError.html" title="Rubirai::RubiraiError (class)">RubiraiError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>kind must be one of group or friend</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/sendNudge</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='id identifier rubyid_target_id'>target_id</span><span class='comma'>,</span>
    <span class='label'>subject:</span> <span class='id identifier rubyid_subject_id'>subject_id</span><span class='comma'>,</span>
    <span class='label'>kind:</span> <span class='id identifier rubyid_kind'>kind</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_capitalize'>capitalize</span>
  <span class='rbrace'>}</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="send_temp_msg-instance_method">
  
    #<strong>send_temp_msg</strong>(target_qq, group_id, *msgs)  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Send temp message</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>target_qq</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>target qq id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>group_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>group id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>msgs</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Message.html" title="Rubirai::Message (class)">Rubirai::Message</a></span>, <span class='object_link'>Hash</span>, <span class='object_link'>String</span>, <span class='object_link'>Object</span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>messages to form a chain, can be any type</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>message id</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


14
15
16
17
18
19
20
21
22
23</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/message.rb', line 14</span>

<span class='kw'>def</span> <span class='id identifier rubyid_send_temp_msg'>send_temp_msg</span><span class='lparen'>(</span><span class='id identifier rubyid_target_qq'>target_qq</span><span class='comma'>,</span> <span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_msgs'>msgs</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_chain'>chain</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Rubirai.html" title="Rubirai (module)">Rubirai</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="MessageChain.html" title="Rubirai::MessageChain (class)">MessageChain</a></span></span><span class='period'>.</span><span class='id identifier rubyid_make'><span class='object_link'><a href="MessageChain.html#make-class_method" title="Rubirai::MessageChain.make (method)">make</a></span></span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_msgs'>msgs</span><span class='comma'>,</span> <span class='label'>bot:</span> <span class='kw'>self</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/sendTempMessage</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>qq:</span> <span class='id identifier rubyid_target_qq'>target_qq</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span>
    <span class='label'>group:</span> <span class='id identifier rubyid_group_id'>group_id</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span>
    <span class='label'>messageChain:</span> <span class='id identifier rubyid_chain'>chain</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
  <span class='rbrace'>}</span>
  <span class='id identifier rubyid_resp'>resp</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>messageId</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_group_config-instance_method">
  
    #<strong>set_group_config</strong>(group_id, config)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Set group config</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>group_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>group id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>config</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="GroupConfig.html" title="Rubirai::GroupConfig (class)">GroupConfig</a></span></tt>, <tt><span class='object_link'>Hash</span>{<span class='object_link'>String</span>, Symbol =&gt; <span class='object_link'>Object</span>}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the configuration. If given as
a hash, then it should be exactly named the same as given in <code>mirai-api-http</code>
docs.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


108
109
110
111
112
113
114
115
116
117
118</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/management.rb', line 108</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_group_config'>set_group_config</span><span class='lparen'>(</span><span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_config'>config</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_must_be!'>must_be!</span> <span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="GroupConfig.html" title="Rubirai::GroupConfig (class)">GroupConfig</a></span></span><span class='comma'>,</span> <span class='const'>Hash</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="RubiraiError.html" title="Rubirai::RubiraiError (class)">RubiraiError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>must be GroupConfig or Hash</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_stringify_keys!'>stringify_keys!</span> <span class='kw'>if</span> <span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>Hash</span>
  <span class='id identifier rubyid_config'>config</span> <span class='op'>=</span> <span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span> <span class='kw'>if</span> <span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'><span class='object_link'><a href="GroupConfig.html" title="Rubirai::GroupConfig (class)">GroupConfig</a></span></span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/groupConfig</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span>
    <span class='label'>config:</span> <span class='id identifier rubyid_config'>config</span>
  <span class='rbrace'>}</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_member_info-instance_method">
  
    #<strong>set_member_info</strong>(group_id, member_id, info)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Set member info</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>group_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>group id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>member_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the member&#39;s qq id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>info</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="MemberInfo.html" title="Rubirai::MemberInfo (class)">MemberInfo</a></span></tt>, <tt><span class='object_link'>Hash</span>{<span class='object_link'>String</span>,Symbol =&gt; <span class='object_link'>Object</span>}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the info to set. If given as
a hash, then it should be exactly named the same as given in <code>mirai-api-http</code>
docs.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


142
143
144
145
146
147
148
149
150
151
152
153</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/management.rb', line 142</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_member_info'>set_member_info</span><span class='lparen'>(</span><span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_member_id'>member_id</span><span class='comma'>,</span> <span class='id identifier rubyid_info'>info</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_info'>info</span><span class='period'>.</span><span class='id identifier rubyid_must_be!'>must_be!</span> <span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="MemberInfo.html" title="Rubirai::MemberInfo (class)">MemberInfo</a></span></span><span class='comma'>,</span> <span class='const'>Hash</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="RubiraiError.html" title="Rubirai::RubiraiError (class)">RubiraiError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>must be MemberInfo or Hash</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_info'>info</span><span class='period'>.</span><span class='id identifier rubyid_stringify_keys!'>stringify_keys!</span> <span class='kw'>if</span> <span class='id identifier rubyid_info'>info</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>Hash</span>
  <span class='id identifier rubyid_info'>info</span> <span class='op'>=</span> <span class='id identifier rubyid_info'>info</span><span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span> <span class='kw'>if</span> <span class='id identifier rubyid_info'>info</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'><span class='object_link'><a href="MemberInfo.html" title="Rubirai::MemberInfo (class)">MemberInfo</a></span></span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/memberInfo</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span>
    <span class='label'>memberId:</span> <span class='id identifier rubyid_member_id'>member_id</span><span class='comma'>,</span>
    <span class='label'>info:</span> <span class='id identifier rubyid_info'>info</span>
  <span class='rbrace'>}</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_session_cfg-instance_method">
  
    #<strong>set_session_cfg</strong>(cache_size: nil, enable_websocket: nil)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Set the config related to this session</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>cache_size</span>
      
      
        <span class='type'>(<tt>Integer</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the cache size</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>enable_websocket</span>
      
      
        <span class='type'>(<tt>Boolean</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>if to enable websocket</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


17
18
19
20
21
22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/session.rb', line 17</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_session_cfg'>set_session_cfg</span><span class='lparen'>(</span><span class='label'>cache_size:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>enable_websocket:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/config</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>cacheSize:</span> <span class='id identifier rubyid_cache_size'>cache_size</span><span class='comma'>,</span>
    <span class='label'>enableWebsocket:</span> <span class='id identifier rubyid_enable_websocket'>enable_websocket</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="start_listen-instance_method">
  
    #<strong>start_listen</strong>(interval, is_blocking: false, ignore_error: false)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Start to listen for events</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>interval</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the interval to fetch events in seconds.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>is_blocking</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>if the listen thread should block the current thread</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ignore_error</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>if errors should generate error events (see <span class='object_link'><a href="RubiraiErrorEvent.html" title="Rubirai::RubiraiErrorEvent (class)">RubiraiErrorEvent</a></span>)</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="RubiraiError.html" title="Rubirai::RubiraiError (class)">RubiraiError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/listener.rb', line 14</span>

<span class='kw'>def</span> <span class='id identifier rubyid_start_listen'>start_listen</span><span class='lparen'>(</span><span class='id identifier rubyid_interval'>interval</span><span class='comma'>,</span> <span class='label'>is_blocking:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>ignore_error:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="RubiraiError.html" title="Rubirai::RubiraiError (class)">RubiraiError</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>listener is already running</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='ivar'>@listener</span><span class='op'>&amp;.</span><span class='id identifier rubyid_running?'>running?</span>
  <span class='ivar'>@listener_stop_event</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Event</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>if</span> <span class='id identifier rubyid_is_blocking'>is_blocking</span>
  <span class='id identifier rubyid_bot'>bot</span> <span class='op'>=</span> <span class='kw'>self</span>
  <span class='ivar'>@listener</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>TimerTask</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>execution_interval:</span> <span class='id identifier rubyid_interval'>interval</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_events'>events</span> <span class='op'>=</span> <span class='id identifier rubyid_fetch_message'>fetch_message</span>
      <span class='id identifier rubyid_events'>events</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span>
        <span class='ivar'>@listener_funcs</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span> <span class='id identifier rubyid_e'>e</span> <span class='rbrace'>}</span>
      <span class='kw'>rescue</span> <span class='const'>RuntimeError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
        <span class='ivar'>@listener_funcs</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span> <span class='const'><span class='object_link'><a href="RubiraiErrorEvent.html" title="Rubirai::RubiraiErrorEvent (class)">RubiraiErrorEvent</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="RubiraiErrorEvent.html#initialize-instance_method" title="Rubirai::RubiraiErrorEvent#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='comma'>,</span> <span class='id identifier rubyid_bot'>bot</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_ignore_error'>ignore_error</span> <span class='rbrace'>}</span>
      <span class='kw'>end</span>
      <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_events'>events</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&lt;</span> <span class='int'>10</span>
    <span class='kw'>rescue</span> <span class='const'>RuntimeError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
      <span class='ivar'>@listener_funcs</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span> <span class='const'><span class='object_link'><a href="RubiraiErrorEvent.html" title="Rubirai::RubiraiErrorEvent (class)">RubiraiErrorEvent</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="RubiraiErrorEvent.html#initialize-instance_method" title="Rubirai::RubiraiErrorEvent#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='comma'>,</span> <span class='id identifier rubyid_bot'>bot</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_ignore_error'>ignore_error</span> <span class='rbrace'>}</span>
      <span class='kw'>break</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='ivar'>@listener</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span>
  <span class='ivar'>@listener_stop_event</span><span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span> <span class='kw'>if</span> <span class='id identifier rubyid_is_blocking'>is_blocking</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stop_listen-instance_method">
  
    #<strong>stop_listen</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Stop listening to events. Will unblock the thread if
<code>is_blocking</code> is <code>true</code> when calling <span class='object_link'><a href="#start_listen-instance_method" title="Rubirai::Bot#start_listen (method)">#start_listen</a></span></p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


54
55
56
57
58</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/listener.rb', line 54</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stop_listen'>stop_listen</span>
  <span class='ivar'>@listener</span><span class='period'>.</span><span class='id identifier rubyid_shutdown'>shutdown</span>
  <span class='ivar'>@listener_stop_event</span><span class='op'>&amp;.</span><span class='id identifier rubyid_set'>set</span>
  <span class='ivar'>@listener_stop_event</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unmute-instance_method">
  
    #<strong>unmute</strong>(group_id, member_id)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Unmute a group member</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>group_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>group id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>member_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>member id</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29
30
31
32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/management.rb', line 27</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unmute'>unmute</span><span class='lparen'>(</span><span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_member_id'>member_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/unmute</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='id identifier rubyid_group_id'>group_id</span><span class='comma'>,</span>
    <span class='label'>memberId:</span> <span class='id identifier rubyid_member_id'>member_id</span>
  <span class='rbrace'>}</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unmute_all-instance_method">
  
    #<strong>unmute_all</strong>(group_id)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Unmute all in a group</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>group_id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>group id</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


81
82
83
84
85
86
87</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/management.rb', line 81</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unmute_all'>unmute_all</span><span class='lparen'>(</span><span class='id identifier rubyid_group_id'>group_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/unmuteAll</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='id identifier rubyid_group_id'>group_id</span>
  <span class='rbrace'>}</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="upload_file_and_send-instance_method">
  
    #<strong>upload_file_and_send</strong>(path_or_io, target, group_path)  &#x21d2; <tt><span class='object_link'>String</span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Uploads a file to a group (currently only groups supported)</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>path_or_io</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>, <tt>Pathname</tt>, <tt>IO</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>path to file</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>target</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>group id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>group_path</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>path to file in group files</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the string id of the mirai file</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35
36
37
38
39
40
41
42</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/multipart.rb', line 33</span>

<span class='kw'>def</span> <span class='id identifier rubyid_upload_file_and_send'>upload_file_and_send</span><span class='lparen'>(</span><span class='id identifier rubyid_path_or_io'>path_or_io</span><span class='comma'>,</span> <span class='id identifier rubyid_target'>target</span><span class='comma'>,</span> <span class='id identifier rubyid_group_path'>group_path</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/uploadFileAndSend</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>form:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Group</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='label'>target:</span> <span class='id identifier rubyid_target'>target</span><span class='comma'>,</span>
    <span class='label'>path:</span> <span class='id identifier rubyid_group_path'>group_path</span><span class='comma'>,</span>
    <span class='label'>file:</span> <span class='const'>HTTP</span><span class='op'>::</span><span class='const'>FormData</span><span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_path_or_io'>path_or_io</span><span class='rparen'>)</span>
  <span class='rbrace'>}</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='lbrace'>{</span> <span class='label'>content_type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>multipart/form-data</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_res'>res</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="upload_image-instance_method">
  
    #<strong>upload_image</strong>(path_or_io, type = :friend)  &#x21d2; <tt><span class='object_link'>Hash</span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Uploads an image to QQ server</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>Hash</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>hash string keys are: <code>{ imageId, url, path }</code></p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


7
8
9
10
11
12
13
14</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/multipart.rb', line 7</span>

<span class='kw'>def</span> <span class='id identifier rubyid_upload_image'>upload_image</span><span class='lparen'>(</span><span class='id identifier rubyid_path_or_io'>path_or_io</span><span class='comma'>,</span> <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='symbol'>:friend</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_ensure_type_in'>ensure_type_in</span> <span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>friend</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>group</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>temp</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/uploadImage</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>form:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>type:</span> <span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='comma'>,</span>
    <span class='label'>img:</span> <span class='const'>HTTP</span><span class='op'>::</span><span class='const'>FormData</span><span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_path_or_io'>path_or_io</span><span class='rparen'>)</span>
  <span class='rbrace'>}</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='lbrace'>{</span> <span class='label'>content_type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>multipart/form-data</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="upload_voice-instance_method">
  
    #<strong>upload_voice</strong>(path_or_io)  &#x21d2; <tt><span class='object_link'>Hash</span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Uploads a voice file to QQ server
Only group uploads available currently.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>path_or_io</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>, <tt>Pathname</tt>, <tt>IO</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>path to voice file</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>Hash</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>hash string keys are: <code>{ voiceId, url, path }</code></p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


20
21
22
23
24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/multipart.rb', line 20</span>

<span class='kw'>def</span> <span class='id identifier rubyid_upload_voice'>upload_voice</span><span class='lparen'>(</span><span class='id identifier rubyid_path_or_io'>path_or_io</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/uploadVoice</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>form:</span> <span class='lbrace'>{</span>
    <span class='label'>sessionKey:</span> <span class='ivar'>@session</span><span class='comma'>,</span>
    <span class='label'>type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>group</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
    <span class='label'>img:</span> <span class='const'>HTTP</span><span class='op'>::</span><span class='const'>FormData</span><span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_path_or_io'>path_or_io</span><span class='rparen'>)</span>
  <span class='rbrace'>}</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='lbrace'>{</span> <span class='label'>content_type:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>multipart/form-data</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="verify-instance_method">
  
    #<strong>verify</strong>(qq, session = nil)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Verify and start a session. Also bind the session to a bot with the qq id.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>qq</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>, <tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>qq id</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>session</span>
      
      
        <span class='type'>(<tt><span class='object_link'>String</span></tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the session key. Set to <code>nil</code> will use the saved credentials.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


17
18
19
20
21
22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubirai/auth.rb', line 17</span>

<span class='kw'>def</span> <span class='id identifier rubyid_verify'>verify</span><span class='lparen'>(</span><span class='id identifier rubyid_qq'>qq</span><span class='comma'>,</span> <span class='id identifier rubyid_session'>session</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_check'>check</span> <span class='id identifier rubyid_qq'>qq</span><span class='comma'>,</span> <span class='id identifier rubyid_session'>session</span>

  <span class='id identifier rubyid_call'>call</span> <span class='symbol'>:post</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/verify</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>json:</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sessionKey</span><span class='label_end'>&quot;:</span> <span class='ivar'>@session</span> <span class='op'>||</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>qq</span><span class='label_end'>&quot;:</span> <span class='id identifier rubyid_qq'>qq</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='rbrace'>}</span>
  <span class='ivar'>@session</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span> <span class='kw'>if</span> <span class='id identifier rubyid_session'>session</span>
  <span class='ivar'>@qq</span> <span class='op'>=</span> <span class='id identifier rubyid_qq'>qq</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Jul  5 09:45:49 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-3.0.1).
</div>

    </div>
  </body>
</html>